@model MojCRM.ViewModels.OrganizationDetailsViewModel
@{
    Layout = null;
}

<!--Modal - ChangeContactInfo-->
@using (Html.BeginForm("EditOrganizationDetails", "Organizations", FormMethod.Post))
{
    <div class="modal fade" id="changeContactInfo" tabindex="-1" role="dialog" aria-labelledby="changeContactInfo">
        <div class="modal-dialog modal-sm" role="document">
            <div class="modal-content" style="overflow:hidden">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4>Izmijeni kontakt podatke</h4>
                </div>
                <div class="modal-body changeEmail">
                    <div class="form-group">
                        <div class="row">
                            <div class="col-md-12">
                                <label for="contact-email">E-mail adrese:</label>
                                <div id="contact-email">
                                    @Html.TextBox("EmailAddress", ViewBag.CurrentFilter as string, new { @class = "form-control col-md-12", @Value = Model.OrganizationDetails.EmailAddress })
                                </div>
                            </div>
                        </div>
                        <br />
                        <div class="row">
                            <div class="col-md-6">
                                <label for="contact-telephone">Broj telefona:</label>
                                <div id="contact-telephone">
                                    @Html.TextBox("TelephoneNumber", ViewBag.CurrentFilter as string, new { @class = "form-control", @Value = Model.OrganizationDetails.TelephoneNumber })
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="contact-mobile">Broj mobitela:</label>
                                <div id="contact-mobile">
                                    @Html.TextBox("MobilePhoneNumber", ViewBag.CurrentFilter as string, new { @class = "form-control", @Value = Model.OrganizationDetails.MobilePhoneNumber })
                                </div>
                            </div>
                            <div class="hidden">
                                <div id="organization-id">
                                    @Html.TextBox("MerId", ViewBag.CurrentFilter as string, new { @class = "form-control", @Value = Model.Organization.MerId })
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--Footer ouside of content, new design. If reactions are bad return it one level up-->
            <div class="modal-footer">
                <button type="submit" class="btn btn-primary">Izmijeni podatke</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Prekini</button>
            </div>
        </div>
    </div>
}
<!--Modal - ChangeDeliveryAddress-->
@using (Html.BeginForm("EditOrganizationDetails", "Organizations", FormMethod.Post))
{
    <div class="modal fade" id="changeDeliveryAddress" tabindex="-1" role="dialog" aria-labelledby="changeDeliveryAddress">
        <div class="modal-dialog modal-sm" role="document">
            <div class="modal-content" style="overflow:hidden">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4>Izmijeni podatke o adresi za dostavu</h4>
                </div>
                <div class="modal-body changeEmail">
                    <div class="form-group">
                        <div class="row">
                            <div class="col-md-2"></div>
                            <div class="col-md-10">
                                <label for="delivery-address">Adresa:</label>
                                <div id="delivery-address">
                                    @Html.TextBox("CorrespondenceAddress", ViewBag.CurrentFilter as string, new { @class = "form-control", @Value = Model.OrganizationDetails.CorrespondenceAddress })
                                </div>
                            </div>
                        </div>
                        <br />
                        <div class="row">
                            <div class="col-md-2"></div>
                            <div class="col-md-10">
                                <label for="delivery-postal-code">Poštanski broj:</label>
                                <div id="delivery-postal-code">
                                    @Html.TextBox("CorrespondencePostalCode", ViewBag.CurrentFilter as string, new { @class = "form-control", @Value = Model.OrganizationDetails.CorrespondencePostalCode })
                                </div>
                            </div>
                        </div>
                        <br />
                        <div class="row">
                            <div class="col-md-2"></div>
                            <div class="col-md-10">
                                <label for="delivery-city">Grad / Mjesto:</label>
                                <div id="delivery-city">
                                    @Html.TextBox("CorrespondenceCity", ViewBag.CurrentFilter as string, new { @class = "form-control", @Value = Model.OrganizationDetails.CorrespondenceCity })
                                </div>
                            </div>
                        </div>
                        <br />
                            <div class="hidden">
                                <div id="organization-id">
                                    @Html.TextBox("MerId", ViewBag.CurrentFilter as string, new { @class = "form-control", @Value = Model.Organization.MerId })
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            <!--Footer ouside of content, new design. If reactions are bad return it one level up-->
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Izmijeni podatke</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Prekini</button>
                </div>
            </div>
        </div>
}

<!--Modal - ChangeGroupLegalForm-->
@using (Html.BeginForm("EditImportantOrganizationInfo", "Organizations", FormMethod.Post))
{
    <div class="modal fade" id="changeGroupLegalForm" tabindex="-1" role="dialog" aria-labelledby="changeGroupLegalForm">
        <div class="modal-dialog modal-sm" role="document">
            <div class="modal-content" style="overflow:hidden">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4>Izmijeni podatke o pravnom obliku i statusu / članstvu u grupaciji</h4>
                </div>
                <div class="modal-body changeEmail">
                    <div class="form-group">
                        <div class="row">
                            <div class="col-md-2"></div>
                            <div class="col-md-10">
                                <label for="legal-form">Pravni oblik:</label>
                                <div id="legal-form">
                                    @Html.DropDownList("LegalForm", Model.LegalFormDropdown, new { @class = "form-control" })
                                </div>
                            </div>
                        </div>
                        <br />
                        <div class="row">
                            <div class="col-md-2"></div>
                            <div class="col-md-10">
                                <label for="legal-status">Pravni status:</label>
                                <div id="legal-status">
                                    @Html.DropDownList("LegalStatus", Model.LegalStatusDropdown, new { @class = "form-control" })
                                </div>
                            </div>
                        </div>
                        <br />
                        <div class="row">
                            <div class="col-md-2"></div>
                            <div class="col-md-10">
                                <label for="organization-group">Članstvo u grupaciji:</label>
                                <div id="organization-group">
                                    @Html.DropDownList("OrganizationGroup", Model.OrganizationGroupDropdown, new { @class = "form-control" })
                                </div>
                            </div>
                        </div>
                        <div class="hidden">
                            <div id="organization-id">
                                @Html.TextBox("MerId", ViewBag.CurrentFilter as string, new { @class = "form-control", @Value = Model.Organization.MerId })
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--Footer ouside of content, new design. If reactions are bad return it one level up-->
            <div class="modal-footer">
                <button type="submit" class="btn btn-primary">Izmijeni podatke</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Prekini</button>
            </div>
        </div>
    </div>
}

<div class="col-md-3">

</div>
<div class="col-md-9">
    <div class="row">
        <div class="col-md-6" title="Osobni identifikacijski broj">
            <strong>OIB: </strong>@Model.Organization.VAT
        </div>
        <div class="col-md-5" title="Podaci iz 2015.">
            <strong>Ukupni godišnji prihod: </strong>@Html.DisplayFor(m => m.Organization.Income)
        </div>
        @if (User.IsInRole("Superadmin"))
        {
            <div class="col-md-1" title="Uredi pravni oblik / članstvo u grupaciji">
                <a href="#changeGroupLegalForm" data-toggle="modal"><i class="fa fa-edit"></i></a>
            </div>
        }
    </div>
    <br />
    <div class="row">
        <div class="col-md-6">
            <strong>Članstvo u grupaciji: </strong>@Model.OrganizationDetails.OrganizationGroupString
        </div>
        <div class="col-md-6" title="Podaci iz 2015.">
            <strong>Broj zaposlenih: </strong>@Model.Organization.Employees
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-md-12">
            <strong>Pravni oblik: </strong>@Model.LegalFormString
        </div>
    </div>
    <hr />
    <div class="row">
        <div class="col-md-11" title="E-mail adresa/adrese za kontakt">
            <strong>E-mail adrese: </strong>@Model.OrganizationDetails.EmailAddress
        </div>
        <div class="col-md-1" title="Uredi kontakt podatke">
            <a href="#changeContactInfo" data-toggle="modal"><i class="fa fa-edit"></i></a>
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-md-6" title="Broj telefona za kontakt">
            <strong>Broj telefona: </strong>@Model.OrganizationDetails.TelephoneNumber
        </div>
        <div class="col-md-6" title="Broj mobitela za kontakt">
            <strong>Broj mobitela: </strong>@Model.OrganizationDetails.MobilePhoneNumber
        </div>
    </div>
    <hr />
    <div class="row">
        <div class="col-md-5">
            <strong>Adresa sjedišta</strong>
        </div>
        <div class="col-md-1">
            <a class="copy-main-address" title="Kopiraj adresu sjedišta u adresu dostave" onclick="javascript: CopyMainAddress()"><i class="fa fa-exchange"></i></a>
        </div>
        <div class="col-md-5">
            <strong>Adresa za dostavu</strong>
        </div>
        <div class="col-md-1" title="Uredi podatke o adresi za dostavu">
            <a href="#changeDeliveryAddress" data-toggle="modal"><i class="fa fa-edit"></i></a>
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-md-3">
            <strong>@Html.DisplayNameFor(m => m.OrganizationDetails.MainAddress)</strong>
        </div>
        <div class="col-md-3">
            @Model.OrganizationDetails.MainAddress
        </div>
        <div class="col-md-3">
            <strong>@Html.DisplayNameFor(m => m.OrganizationDetails.CorrespondenceAddress)</strong>
        </div>
        <div class="col-md-3">
            @Model.OrganizationDetails.CorrespondenceAddress
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-md-3">
            <strong>@Html.DisplayNameFor(m => m.OrganizationDetails.MainPostalCode)</strong>
        </div>
        <div class="col-md-3">
            @Model.OrganizationDetails.MainPostalCode
        </div>
        <div class="col-md-3">
            <strong>@Html.DisplayNameFor(m => m.OrganizationDetails.CorrespondencePostalCode)</strong>
        </div>
        <div class="col-md-3">
            @Model.OrganizationDetails.CorrespondencePostalCode
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-md-3">
            <strong>@Html.DisplayNameFor(m => m.OrganizationDetails.MainCity)</strong>
        </div>
        <div class="col-md-3">
            @Model.OrganizationDetails.MainCity
        </div>
        <div class="col-md-3">
            <strong>@Html.DisplayNameFor(m => m.OrganizationDetails.CorrespondenceCity)</strong>
        </div>
        <div class="col-md-3">
            @Model.OrganizationDetails.CorrespondenceCity
        </div>
    </div>
    @if (Model.OrganizationDetails.MainCountry == MojCRM.Models.OrganizationDetail.CountryIdentificationCodeEnum.Hr)
    {
        <br />
        <div class="row">
            <div class="col-md-3">
                <strong>@Html.DisplayNameFor(m => m.MainCountyString)</strong>
            </div>
            <div class="col-md-3">
                @Model.MainCountyString
            </div>
            <div class="col-md-3">
                <strong>@Html.DisplayNameFor(m => m.CorrespondenceCountyString)</strong>
            </div>
            <div class="col-md-3">
                @Model.CorrespondenceCountyString
            </div>
        </div>
    }
    <br />
    <div class="row">
        <div class="col-md-3">
            <strong>@Html.DisplayNameFor(m => m.OrganizationDetails.MainCountry)</strong>
        </div>
        <div class="col-md-3">
            @Model.MainCountryCodeString
        </div>
        <div class="col-md-3">
            <strong>@Html.DisplayNameFor(m => m.OrganizationDetails.CorrespondenceCountry)</strong>
        </div>
        <div class="col-md-3">
            @Model.CorrespondenceCountryCodeString
        </div>
    </div>
    <hr />
    <p>Podaci o administraciji tvrtke</p>
    <div class="row">
        <div class="col-md-6" title="Datum i vrijeme unosa tvrtke u Moj-CRM bazu">
            <strong>Datum unosa: </strong>@Model.Organization.InsertDate
        </div>
        <div class="col-md-6" title="Datum i vrijeme zadnje promjene tvrtke u Moj-CRM bazi">
            <strong>Datum promjene: </strong>@Model.Organization.UpdateDate
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-md-6" title="Datum i vrijeme zadnje sinkronizacije sa Moj-eRačun">
            <strong>Datum zadnje sinkronizacije: </strong>@Model.Organization.MerUpdateDate
        </div>
        <div class="col-md-6" title="Ime i prezime korisnika koji je napravio zadnju promjenu">
            <strong>Zadnju promjenu napravio: </strong>@Model.Organization.LastUpdatedBy
        </div>
    </div>
</div>
